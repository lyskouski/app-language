<MainScreen>:
    RootWidget:
        id: root_widget

<RootWidget@BoxLayout>:
    orientation: "vertical"
    RecycleView:
        id: breadcrumb_view
        viewclass: "BreadcrumbWidget"
        data: []
        size_hint_y: dp(0.17)
        RecycleBoxLayout:
            orientation: "horizontal"
            height: self.minimum_height
            size_hint_y: None
            default_size: None, dp(24)
    Widget:
        size_hint_y: dp(0.04)
    RecycleView:
        id: recycle_view
        viewclass: "RootItemWidget"
        RecycleBoxLayout:
            default_size: None, dp(48)
            default_size_hint: 1, None
            size_hint_y: None
            height: self.minimum_height
            orientation: "vertical"
    Widget:
        size_hint_x: 1
    BoxLayout:
        orientation: "horizontal"
        Widget:
            size_hint_x: dp(0.02)
        Button:
            size_hint_y: None if root.path == 'assets/source.json' else 0
            disabled: False if root.path == 'assets/source.json' else True
            opacity: 1.0 if root.path == 'assets/source.json' else 0
            height: '48dp' if root.path == 'assets/source.json' else 0
            text: app._("button_add", app.locale)
            on_release:
                app.next_screen('structure_screen')
        Widget:
            size_hint_x: dp(0.02)
    Widget:
        size_hint_y: dp(0.08)

<RootItemWidget@BoxLayout>:
    orientation: "horizontal"
    text: ""
    source: ""
    logo: ""
    store_path: ""
    route_path: ""
    locale: ""
    locale_to: ""
    Widget:
        size_hint_x: dp(0.05)
    Image:
        size_hint_x: None
        source: root.logo
    Label:
        text: root.text
    Button:
        text: app._('button_play', app.locale) if root.route_path else ""
        disabled: False if root.route_path else True
        opacity: 1.0 if root.route_path else 0
        size_hint_x: dp(0.5) if root.route_path else dp(0.01)
        on_release:
            app.next_screen('loading_screen')
            kivy.clock.Clock.schedule_once(lambda dt: app.next_screen(root.route_path), 1)
    Button:
        text: app._('button_select', app.locale)
        opacity: 1.0 if not root.route_path else 0
        size_hint_x: dp(0.5) if not root.route_path else 0
        on_release:
            app.root.get_screen('main_screen').ids.root_widget.update_data(root)
    Widget:
        size_hint_x: dp(0.05)

<BreadcrumbWidget@Button>:
    text: ""
    source: ""
    cursor: "hand"
    width: self.texture_size[0] + dp(20)
    size_hint_x: None
    background_normal: ""
    background_color: 0,0,0,0
    canvas.after:
        Color:
            rgba: 1, 1, 1, 1
        Triangle:
            points: (self.right - dp(5), self.y + dp(6), self.right - dp(2), self.center_y, self.right - dp(5), self.top - dp(6))
        Line:
            points: (self.x + dp(10), self.y - dp(1), self.right - dp(10), self.y - dp(1))
            width: 0.25
    on_release:
        app.root.get_screen('main_screen').ids.root_widget.load_breadcrumb(root.source)
